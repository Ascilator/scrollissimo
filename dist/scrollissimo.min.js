/**
 * Scrollissimo
 * Javascript plugin for smooth scroll-controlled animations
 * @version 0.3.5
 * @author frux <qdinov@yandex.ru>
 * @url https://github.com/Promo/scrollissimo
 */
!function(t,e){function i(){return Math.max(t.body.scrollHeight,t.documentElement.scrollHeight)}var s,n,o,r={},a=0,h=[],m=[];!function(){var t,i=["ms","moz","webkit","o"],s=i.length;if(e.requestAnimationFrame)e._rAF=e.requestAnimationFrame;else{for(t=0;s>t&&!e.requestAnimationFrame;t+=1)e._rAF=e[i[t]+"RequestAnimationFrame"]&&e[i[t]+"RequestAnimationFrame"];!e._rAF&&(e._rAF=function(t){return setTimeout(function(){t()},1e3/60)})}}(),r._getIntersection=function(t,e,i,s){var n,o,r=Math.min(i,s),a=Math.max(i,s),h=t,m=e;if(h>=r&&a>=h)n=h,o=Math.min(a,m);else if(a>=m&&m>=r)n=Math.max(r,h),o=Math.min(a,m);else{if(!(r>=h&&m>=a))return;n=r,o=a}return s>i?{from:n,to:o}:{from:o,to:n}},r._toPercents=function(t,e){return e=e||o||i(),"string"==typeof t?"%"===t.substr(-1,1)?parseFloat(t)/100:"px"===t.substr(-2,2)?parseFloat(t)/e:parseFloat(t)/e:isNaN(t)?void 0:t/e},s=function(t,e,i){t&&(this.params={},this.params.start=r._toPercents(e||0),this.params.duration=r._toPercents(t.duration()||0),this.timeline=t.pause(),isNaN(i)||(this._maxSpeed=.001*i,this._smoother=new s.Smoother(this,this._maxSpeed)))},s.prototype.getIntersection=function(t,e){return r._getIntersection(this.params.start,this.params.start+this.params.duration,t,e)},s.prototype.render=function(t){var e=Math.round((t-this.params.start)/this.params.duration*1e3)/1e3,i=this.timeline.duration()*e;return this.timeline.seek(i),this},s.Smoother=function(t,e){this.status="idle",this.animateTo=0,this.maxSpeed=+e,this.queue=t},s.Smoother.prototype.smooth=function(t,i){var s=this.queue.getIntersection(t,i);return s?(this.animateTo=s.to,this.animateFrom=this.animateFrom||s.from,"idle"===this.status&&(this.status="busy",this.id=e._rAF(this.step.bind(this))),this):void 0},s.Smoother.prototype.step=function(){var t=this.animateTo-this.animateFrom;Math.abs(t)>this.maxSpeed?(this.queue.render(this.animateFrom+=this.maxSpeed*(t>0?1:-1)),e._rAF(this.step.bind(this))):(this.queue.render(this.animateTo),this.status="idle",this.animateFrom=this.animateTo)},r.add=function(t,e,i){isNaN(i)?m.push(new s(t,e,i)):h.push(new s(t,e,i))},r._render=function(t,e){m.forEach(function(e){e.render(t)}),h.forEach(function(i){e?i.render(t):i._smoother.smooth(r._lastProgress,t)}),r._lastProgress=t}.bind(r),r._catch=function(t){var i=isNaN(t)?e.pageYOffset:t,s=i/(o-n);this._render(s),a=i},r.knock=function(t){r._disableKnock||(this._catch(t),isNaN(t)&&setTimeout(this._catch.bind(this),100))},r.isTouchMode="ontouchstart"in e,r._disableKnock=!0,e.addEventListener("load",function(){o=i(),n=e.innerHeight,setTimeout(function(){var t=e.pageYOffset,i=t/(o-n);a=t,r._render(i,!0),r._disableKnock=!1},100)}),"object"==typeof module?module.exports=r:e.Scrollissimo=r}(document,window);